import{r as i,g as m,j as e,R as u,c as h}from"./storage-B1SBg69L.js";function y(){const[t,a]=i.useState({type:"idle"}),[s,l]=i.useState(!0),[r,g]=i.useState(!1),d=i.useCallback(async()=>{const n=await m();l(n.enabled),g(!!n.apiConfig.apiKey);const o=await chrome.runtime.sendMessage({type:"GET_STATUS"});o&&a(o)},[]);i.useEffect(()=>{d()},[d]);const p=async()=>{const n=!s;if(l(n),await chrome.runtime.sendMessage({type:"TOGGLE_ENABLED",enabled:n}),n){a({type:"loading"});const o=await chrome.runtime.sendMessage({type:"ANALYZE_PAGE"});o&&a(o)}},x=async()=>{a({type:"loading"});const n=await chrome.runtime.sendMessage({type:"REANALYZE_PAGE"});n&&a(n)},c=()=>{chrome.runtime.openOptionsPage()};return e.jsxs("div",{className:"w-72 bg-white text-gray-900 font-sans",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸš¥"}),e.jsx("span",{className:"font-semibold text-sm",children:"FocusOnly"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:p,className:`relative w-9 h-5 rounded-full transition-colors cursor-pointer ${s?"bg-green-500":"bg-gray-300"}`,title:s?"Disable":"Enable",children:e.jsx("span",{className:`absolute top-0.5 left-0.5 w-4 h-4 rounded-full bg-white shadow transition-transform ${s?"translate-x-4":"translate-x-0"}`})}),e.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 p-1 cursor-pointer",title:"Settings",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.066 2.573c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.573 1.066c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.066-2.573c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]}),e.jsxs("div",{className:"px-4 py-4",children:[!s&&e.jsx(j,{}),s&&!r&&e.jsx(b,{onOpenSettings:c}),s&&r&&t.type==="idle"&&e.jsx(N,{}),s&&r&&t.type==="loading"&&e.jsx(f,{}),s&&r&&t.type==="success"&&e.jsx(v,{verdict:t.verdict,onReanalyze:x}),s&&r&&t.type==="error"&&e.jsx(w,{message:t.message,onRetry:x,onOpenSettings:c}),s&&r&&t.type==="skipped"&&e.jsx(S,{reason:t.reason})]})]})}function j(){return e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"FocusOnly is paused"}),e.jsx("p",{className:"text-gray-300 text-xs mt-1",children:"Toggle the switch to enable"})]})}function b({onOpenSettings:t}){return e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"No API key configured"}),e.jsx("button",{onClick:t,className:"text-sm px-3 py-1.5 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors cursor-pointer",children:"Set up in Settings"})]})}function N(){return e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"Navigate to a page to analyze"})})}function f(){return e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-gray-200 border-t-blue-500 rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-gray-400 text-sm mt-3",children:"Analyzing page..."})]})}function v({verdict:t,onReanalyze:a}){const s={Read:{color:"bg-green-500",textColor:"text-green-700",bgLight:"bg-green-50",label:"Read",emoji:"ðŸŸ¢"},Save:{color:"bg-yellow-400",textColor:"text-yellow-700",bgLight:"bg-yellow-50",label:"Save",emoji:"ðŸŸ¡"},Leave:{color:"bg-red-500",textColor:"text-red-700",bgLight:"bg-red-50",label:"Leave",emoji:"ðŸ”´"}}[t.verdict]??{color:"bg-gray-400",textColor:"text-gray-700",bgLight:"bg-gray-50",label:t.verdict,emoji:"âšª"};return e.jsxs("div",{children:[e.jsx("div",{className:`${s.bgLight} rounded-lg p-3 mb-3`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:s.emoji}),e.jsx("span",{className:`font-bold text-lg ${s.textColor}`,children:s.label})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${s.color} rounded-full`,style:{width:`${t.score}%`}})}),e.jsx("span",{className:`text-sm font-semibold ${s.textColor}`,children:t.score})]})]})}),t.reasons.length>0&&e.jsx("ul",{className:"space-y-1.5 mb-3",children:t.reasons.map((l,r)=>e.jsxs("li",{className:"flex items-start gap-2 text-xs text-gray-600",children:[e.jsx("span",{className:"text-gray-300 mt-0.5",children:"â€¢"}),e.jsx("span",{children:l})]},r))}),e.jsx("button",{onClick:a,className:"w-full text-xs text-gray-400 hover:text-gray-600 py-1 transition-colors cursor-pointer",children:"Re-analyze this page"})]})}function w({message:t,onRetry:a,onOpenSettings:s}){const l=t.includes("API key")||t.includes("401");return e.jsxs("div",{className:"text-center py-3",children:[e.jsx("p",{className:"text-red-500 text-sm mb-2",children:t}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{onClick:a,className:"text-xs px-3 py-1.5 border border-gray-200 rounded-md hover:bg-gray-50 transition-colors cursor-pointer",children:"Retry"}),l&&e.jsx("button",{onClick:s,className:"text-xs px-3 py-1.5 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors cursor-pointer",children:"Settings"})]})]})}function S({reason:t}){return e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Page skipped"}),e.jsx("p",{className:"text-gray-300 text-xs mt-1",children:t})]})}u.createRoot(document.getElementById("root")).render(e.jsx(h.StrictMode,{children:e.jsx(y,{})}));
